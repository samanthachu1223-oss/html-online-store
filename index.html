// Function to place the order and go to checkout page
function placeOrder() {
    const selectedItems = drinkList.filter(item => item.quantity > 0);

    if (selectedItems.length === 0) {
        alert("Your cart is empty. Please add items before checkout.");
        return;
    }

    // Save order to localStorage
    localStorage.setItem("orderData", JSON.stringify(selectedItems));

    // Go to checkout page
    window.location.href = "checkout.html";
}

// Function to return to the shop page
function returnToShop() {
    window.location.href = "index.html";
}

// Function to display order details on checkout page
function displayOrderSummary() {
    const orderData = JSON.parse(localStorage.getItem("orderData")) || [];

    const orderContainer = document.getElementById("order-summary");

    if (!orderContainer) return;

    if (orderData.length === 0) {
        orderContainer.innerHTML = "<p>No items found in your order.</p>";
        return;
    }

    let html = "";
    let totalPrice = 0;

    orderData.forEach(item => {
        const subtotal = item.price * item.quantity;
        totalPrice += subtotal;

        html += `
            <div class="order-item">
                <p><strong>${item.name}</strong></p>
                <p>Quantity: ${item.quantity}</p>
                <p>Price: $${item.price}</p>
                <p>Subtotal: $${subtotal}</p>
                <hr>
            </div>
        `;
    });

    html += `<h3>Total: $${totalPrice}</h3>`;
    orderContainer.innerHTML = html;
}

// Event binding when the page loads
document.addEventListener("DOMContentLoaded", () => {
    if (window.location.pathname.includes("checkout.html")) {
        displayOrderSummary();

        const backBtn = document.getElementById("back-to-shop");
        if (backBtn) {
            backBtn.addEventListener("click", returnToShop);
        }
    }
});
