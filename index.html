
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§‹ Bubble tea shop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        h1 {
            color: #764ba2;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .filter-section {
            margin-bottom: 25px;
        }

        .filter-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .category-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .category-btn:hover {
            background: #f0f0ff;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
        }

        .search-box {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .product-grid {
            display: grid;
            gap: 20px;
        }

        .product-card {
            border: 2px solid #eee;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .product-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .product-header {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
        }

        .product-emoji {
            font-size: 3em;
        }

        .product-info {
            flex: 1;
        }

        .product-title {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 5px;
        }

        .product-category {
            display: inline-block;
            background: #f0f0ff;
            color: #667eea;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            margin-bottom: 8px;
        }

        .product-description {
            color: #666;
            margin-bottom: 10px;
        }

        .product-price {
            font-weight: 600;
            color: #764ba2;
            font-size: 1.1em;
        }

        .product-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .option-group label {
            display: block;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 5px;
            color: #555;
        }

        .option-group select {
            width: 100%;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .add-to-cart-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .cart-empty {
            text-align: center;
            color: #999;
            padding: 20px;
        }

        .cart-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-details {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 8px;
        }

        .cart-item-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .cart-item-qty {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .qty-btn {
            width: 28px;
            height: 28px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }

        .qty-btn:hover {
            background: #667eea;
            color: white;
        }

        .qty-display {
            min-width: 30px;
            text-align: center;
            font-weight: 600;
        }

        .cart-total {
            font-size: 1.3em;
            font-weight: 700;
            color: #764ba2;
            margin: 20px 0;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .cart-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .checkout-form {
            background: #f9f9ff;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .order-confirmation {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #4caf50;
        }

        .success-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 15px;
        }

        .order-details {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
        }

        @media (max-width: 640px) {
            .product-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <h1>ğŸ§‹ æ³¡æ²«èŒ¶é£²åº—</h1>
            
            <div id="menuSection">
                <div class="filter-section">
                    <label>ğŸ” åˆ†é¡ç¯©é¸</label>
                    <div class="category-buttons">
                        <button class="category-btn active" data-category="all">å…¨éƒ¨</button>
                        <button class="category-btn" data-category="tea">èŒ¶é£²</button>
                        <button class="category-btn" data-category="latte">æ‹¿éµ</button>
                        <button class="category-btn" data-category="fruit">æ°´æœ</button>
                        <button class="category-btn" data-category="special">ç‰¹èª¿</button>
                    </div>
                </div>

                <div class="filter-section">
                    <label>ğŸ” æœå°‹é£²å“</label>
                    <input type="text" class="search-box" id="searchInput" placeholder="è¼¸å…¥é£²å“åç¨±...">
                </div>

                <h2>â˜• èœå–®</h2>
                <p id="productCount" style="color: #666; margin-bottom: 20px;"></p>
                <div class="product-grid" id="productGrid"></div>
            </div>

            <div id="checkoutSection" class="hidden">
                <h2>ğŸ“ çµå¸³è³‡è¨Š</h2>
                <div class="checkout-form">
                    <div class="form-group">
                        <label>å§“å *</label>
                        <input type="text" id="customerName" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å">
                    </div>
                    <div class="form-group">
                        <label>é›»è©± *</label>
                        <input type="text" id="customerPhone" placeholder="è«‹è¼¸å…¥æ‚¨çš„é›»è©±">
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="placeOrder()">ç¢ºèªä¸‹å–®</button>
                </div>
            </div>

            <div id="confirmationSection" class="hidden">
                <div class="order-confirmation">
                    <div class="success-icon">âœ…</div>
                    <h2 style="text-align: center; color: #4caf50;">è¨‚å–®ç¢ºèªï¼</h2>
                    <p style="text-align: center; margin: 10px 0;">è¨‚å–®ç·¨è™Ÿ: <strong id="orderIdDisplay"></strong></p>
                    
                    <div class="order-details">
                        <p><strong>å§“å:</strong> <span id="orderName"></span></p>
                        <p><strong>é›»è©±:</strong> <span id="orderPhone"></span></p>
                        <hr style="margin: 15px 0;">
                        <h3>ğŸ§¾ è¨‚å–®æ˜ç´°</h3>
                        <div id="orderItems"></div>
                        <hr style="margin: 15px 0;">
                        <p style="font-size: 1.3em; font-weight: 700; color: #764ba2;">ğŸ’° ç¸½é‡‘é¡: <span id="orderTotal"></span></p>
                    </div>
                    
                    <p style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        â° æ„Ÿè¬æ‚¨çš„è¨‚è³¼ï¼è«‹è‡³æ«ƒæª¯å–é¤ã€‚
                    </p>
                    
                    <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="returnToShop()">è¿”å›å•†åº—</button>
                </div>
// Function to place the order and go to checkout page
function placeOrder() {
    const selectedItems = drinkList.filter(item => item.quantity > 0);

    if (selectedItems.length === 0) {
        alert("Your cart is empty. Please add items before checkout.");
        return;
    }

    // Save order to localStorage
    localStorage.setItem("orderData", JSON.stringify(selectedItems));

    // Go to checkout page
    window.location.href = "checkout.html";
}

// Function to return to the shop page
function returnToShop() {
    window.location.href = "index.html";
}

// Function to display order details on checkout page
function displayOrderSummary() {
    const orderData = JSON.parse(localStorage.getItem("orderData")) || [];

    const orderContainer = document.getElementById("order-summary");

    if (!orderContainer) return;

    if (orderData.length === 0) {
        orderContainer.innerHTML = "<p>No items found in your order.</p>";
        return;
    }

    let html = "";
    let totalPrice = 0;

    orderData.forEach(item => {
        const subtotal = item.price * item.quantity;
        totalPrice += subtotal;

        html += `
            <div class="order-item">
                <p><strong>${item.name}</strong></p>
                <p>Quantity: ${item.quantity}</p>
                <p>Price: $${item.price}</p>
                <p>Subtotal: $${subtotal}</p>
                <hr>
            </div>
        </div>

        <div class="sidebar">
            <h3>ğŸ›’ è³¼ç‰©è»Š</h3>
            <div id="cartContent"></div>
        </div>
    </div>

    <script>
        const PRODUCTS = [
            {"id": "p1", "title": "çç å¥¶èŒ¶", "description": "ç¶“å…¸çç å¥¶èŒ¶ï¼ŒQå½ˆçç ", "price": 60, "emoji": "ğŸ§‹", "category": "tea"},
            {"id": "p2", "title": "é¤Šæ¨‚å¤šç¶ èŒ¶", "description": "æ¸…çˆ½ç¶ èŒ¶é…é¤Šæ¨‚å¤š", "price": 55, "emoji": "ğŸµ", "category": "tea"},
            {"id": "p3", "title": "æŠ¹èŒ¶æ‹¿éµ", "description": "æ¿ƒéƒæŠ¹èŒ¶é¢¨å‘³", "price": 70, "emoji": "ğŸµ", "category": "latte"},
            {"id": "p4", "title": "çƒé¾å¥¶èŒ¶", "description": "çƒé¾èŒ¶èˆ‡é®®å¥¶å®Œç¾çµåˆ", "price": 65, "emoji": "ğŸ¥›", "category": "tea"},
            {"id": "p5", "title": "å†¬ç“œæª¸æª¬", "description": "å‚³çµ±å†¬ç“œé…æ–°é®®æª¸æª¬", "price": 50, "emoji": "ğŸ‹", "category": "fruit"},
            {"id": "p6", "title": "èŠ‹é ­å¥¶èŒ¶", "description": "é¦™æ¿ƒèŠ‹é ­å¥¶èŒ¶", "price": 65, "emoji": "ğŸŸ£", "category": "tea"},
            {"id": "p7", "title": "é»‘ç³–çç é®®å¥¶", "description": "é»‘ç³–çç èˆ‡é®®å¥¶", "price": 75, "emoji": "ğŸ§‹", "category": "special"},
            {"id": "p8", "title": "æ³°å¼å¥¶èŒ¶", "description": "æ¿ƒéƒæ³°å¼é¢¨å‘³", "price": 60, "emoji": "ğŸ§¡", "category": "tea"},
            {"id": "p9", "title": "èŠ’æœå†°æ²™", "description": "æ–°é®®èŠ’æœå†°æ²™", "price": 80, "emoji": "ğŸ¥­", "category": "fruit"},
            {"id": "p10", "title": "è‰è“å¥¶èŒ¶", "description": "é¦™ç”œè‰è“å¥¶èŒ¶", "price": 70, "emoji": "ğŸ“", "category": "fruit"},
            {"id": "p11", "title": "ç„¦ç³–æ‹¿éµ", "description": "é¦™ç”œç„¦ç³–æ‹¿éµ", "price": 75, "emoji": "â˜•", "category": "latte"},
            {"id": "p12", "title": "æª¸æª¬ç¶ èŒ¶", "description": "æ¸…çˆ½æª¸æª¬ç¶ èŒ¶", "price": 50, "emoji": "ğŸ‹", "category": "tea"},
            {"id": "p13", "title": "èœ‚èœœå¥¶èŒ¶", "description": "å¤©ç„¶èœ‚èœœå¥¶èŒ¶", "price": 65, "emoji": "ğŸ¯", "category": "tea"},
            {"id": "p14", "title": "ç™¾é¦™æœèŒ¶", "description": "ç†±å¸¶ç™¾é¦™æœç¶ èŒ¶", "price": 60, "emoji": "ğŸŸ ", "category": "fruit"},
            {"id": "p15", "title": "æ¤°å­å†°æ²™", "description": "é¦™æ¿ƒæ¤°å­å†°æ²™", "price": 75, "emoji": "ğŸ¥¥", "category": "fruit"},
            {"id": "p16", "title": "ç´…èŒ¶æ‹¿éµ", "description": "ç¶“å…¸ç´…èŒ¶æ‹¿éµ", "price": 65, "emoji": "â˜•", "category": "latte"},
            {"id": "p17", "title": "æ°´èœœæ¡ƒçƒé¾", "description": "é¦™ç”œæ°´èœœæ¡ƒçƒé¾èŒ¶", "price": 60, "emoji": "ğŸ‘", "category": "tea"},
            {"id": "p18", "title": "æ¦›æœæ‹¿éµ", "description": "æ¿ƒéƒæ¦›æœæ‹¿éµ", "price": 80, "emoji": "ğŸŒ°", "category": "latte"},
            {"id": "p19", "title": "ç«ç‘°å¥¶èŒ¶", "description": "æ¸…é¦™ç«ç‘°å¥¶èŒ¶", "price": 70, "emoji": "ğŸŒ¹", "category": "tea"},
            {"id": "p20", "title": "è¥¿ç“œæ±", "description": "æ–°é®®è¥¿ç“œæ±", "price": 55, "emoji": "ğŸ‰", "category": "fruit"},
            {"id": "p21", "title": "å·§å…‹åŠ›å¥¶èŒ¶", "description": "æ¿ƒéƒå·§å…‹åŠ›å¥¶èŒ¶", "price": 70, "emoji": "ğŸ«", "category": "tea"},
            {"id": "p22", "title": "é¦™è‰æ‹¿éµ", "description": "é¦™ç”œé¦™è‰æ‹¿éµ", "price": 75, "emoji": "â˜•", "category": "latte"},
            {"id": "p23", "title": "è”æèŒ¶", "description": "é¦™ç”œè”æç¶ èŒ¶", "price": 60, "emoji": "ğŸ‡", "category": "tea"},
            {"id": "p24", "title": "é³³æ¢¨å†°æ²™", "description": "ç†±å¸¶é³³æ¢¨å†°æ²™", "price": 75, "emoji": "ğŸ", "category": "fruit"},
            {"id": "p25", "title": "ä¼¯çˆµå¥¶èŒ¶", "description": "é¦™æ¿ƒä¼¯çˆµå¥¶èŒ¶", "price": 65, "emoji": "â˜•", "category": "tea"},
            {"id": "p26", "title": "å¥‡ç•°æœèŒ¶", "description": "é…¸ç”œå¥‡ç•°æœç¶ èŒ¶", "price": 60, "emoji": "ğŸ¥", "category": "fruit"},
            {"id": "p27", "title": "æ‘©å¡æ‹¿éµ", "description": "å’–å•¡å·§å…‹åŠ›æ‹¿éµ", "price": 80, "emoji": "â˜•", "category": "latte"},
            {"id": "p28", "title": "æä»å¥¶èŒ¶", "description": "é¦™æ¿ƒæä»å¥¶èŒ¶", "price": 70, "emoji": "ğŸ¥œ", "category": "tea"},
            {"id": "p29", "title": "è—è“å†°æ²™", "description": "å¥åº·è—è“å†°æ²™", "price": 80, "emoji": "ğŸ«", "category": "fruit"},
            {"id": "p30", "title": "èŒ‰è‰ç¶ èŒ¶", "description": "æ¸…é¦™èŒ‰è‰ç¶ èŒ¶", "price": 50, "emoji": "ğŸŒ¸", "category": "tea"}
        ];
        `;
    });

        const SIZE_OPTIONS = {"ä¸­æ¯": 0, "å¤§æ¯": 10};
        const SUGAR_OPTIONS = ["æ­£å¸¸ç³–", "å°‘ç³–", "åŠç³–", "å¾®ç³–", "ç„¡ç³–"];
        const ICE_OPTIONS = ["æ­£å¸¸å†°", "å°‘å†°", "å»å†°", "ç†±é£²"];
    html += `<h3>Total: $${totalPrice}</h3>`;
    orderContainer.innerHTML = html;
}

        let cart = {};
        let currentCategory = 'all';
        let searchQuery = '';
// Event binding when the page loads
document.addEventListener("DOMContentLoaded", () => {
    if (window.location.pathname.includes("checkout.html")) {
        displayOrderSummary();

        function formatCurrency(amount) {
            return `NT$ ${amount}`;
        const backBtn = document.getElementById("back-to-shop");
        if (backBtn) {
            backBtn.addEventListener("click", returnToShop);
        }

        function renderProducts() {
            const grid = document.getElementById('productGrid');
            const filtered = PRODUCTS.filter(p => {
                const matchCategory = currentCategory === 'all' || p.category === currentCategory;
                const matchSearch = p.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                   p.description.toLowerCase().includes(searchQuery.toLowerCase());
                return matchCategory && matchSearch;
            });

            document.getElementById('productCount').textContent = 
                currentCategory === 'all' 
                    ? `é¡¯ç¤ºå…¨éƒ¨ ${filtered.length} ç¨®é£²å“` 
                    : `é¡¯ç¤º ${filtered.length} ç¨®é£²å“`;

            if (filtered.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">æ‰¾ä¸åˆ°ç¬¦åˆçš„é£²å“ï¼Œè«‹è©¦è©¦å…¶ä»–æœå°‹æ¢ä»¶ï¼</p>';
                return;
            }

            grid.innerHTML = filtered.map(p => {
                const iceOptions = (p.category === 'tea' || p.category === 'latte') 
                    ? ICE_OPTIONS 
                    : ICE_OPTIONS.filter(opt => opt !== 'ç†±é£²');

                return `
                    <div class="product-card">
                        <div class="product-header">
                            <div class="product-emoji">${p.emoji}</div>
                            <div class="product-info">
                                <div class="product-title">${p.title}</div>
                                <span class="product-category">ğŸ·ï¸ ${getCategoryName(p.category)}</span>
                                <div class="product-description">${p.description}</div>
                                <div class="product-price">ğŸ’° ${formatCurrency(p.price)} èµ·</div>
                            </div>
                        </div>
                        <div class="product-options">
                            <div class="option-group">
                                <label>å®¹é‡</label>
                                <select id="size_${p.id}">
                                    ${Object.keys(SIZE_OPTIONS).map(s => 
                                        `<option value="${s}">${s}${SIZE_OPTIONS[s] > 0 ? ' +' + SIZE_OPTIONS[s] : ''}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            <div class="option-group">
                                <label>ç”œåº¦</label>
                                <select id="sugar_${p.id}">
                                    ${SUGAR_OPTIONS.map(s => `<option value="${s}">${s}</option>`).join('')}
                                </select>
                            </div>
                            <div class="option-group">
                                <label>å†°åº¦</label>
                                <select id="ice_${p.id}">
                                    ${iceOptions.map(i => `<option value="${i}">${i}</option>`).join('')}
                                </select>
                            </div>
                        </div>
                        <button class="add-to-cart-btn" onclick="addToCart('${p.id}')">åŠ å…¥è³¼ç‰©è»Š</button>
                    </div>
                `;
            }).join('');
        }

        function getCategoryName(cat) {
            const names = {tea: 'èŒ¶é£²', latte: 'æ‹¿éµ', fruit: 'æ°´æœ', special: 'ç‰¹èª¿'};
            return names[cat] || cat;
        }

        function addToCart(pid) {
            const size = document.getElementById(`size_${pid}`).value;
            const sugar = document.getElementById(`sugar_${pid}`).value;
            const ice = document.getElementById(`ice_${pid}`).value;
            const key = `${pid}_${size}_${sugar}_${ice}`;
            
            cart[key] = (cart[key] || 0) + 1;
            renderCart();
        }

        function updateQty(key, delta) {
            cart[key] = (cart[key] || 0) + delta;
            if (cart[key] <= 0) delete cart[key];
            renderCart();
        }

        function renderCart() {
            const content = document.getElementById('cartContent');
            const keys = Object.keys(cart);

            if (keys.length === 0) {
                content.innerHTML = '<div class="cart-empty">è³¼ç‰©è»Šæ˜¯ç©ºçš„</div>';
                return;
            }

            let total = 0;
            let html = '';

            keys.forEach(key => {
                const [pid, size, sugar, ice] = key.split('_');
                const product = PRODUCTS.find(p => p.id === pid);
                if (!product) return;

                const qty = cart[key];
                const itemPrice = product.price + SIZE_OPTIONS[size];
                const subtotal = itemPrice * qty;
                total += subtotal;

                html += `
                    <div class="cart-item">
                        <div class="cart-item-title">${product.emoji} ${product.title}</div>
                        <div class="cart-item-details">${size} | ${sugar} | ${ice}</div>
                        <div class="cart-item-price">
                            <span>${formatCurrency(itemPrice)} Ã— ${qty}</span>
                            <span>${formatCurrency(subtotal)}</span>
                        </div>
                        <div class="cart-item-qty">
                            <button class="qty-btn" onclick="updateQty('${key}', -1)">âˆ’</button>
                            <span class="qty-display">${qty}</span>
                            <button class="qty-btn" onclick="updateQty('${key}', 1)">+</button>
                        </div>
                    </div>
                `;
            });

            html += `
                <div class="cart-total">ç¸½è¨ˆ: ${formatCurrency(total)}</div>
                <div class="cart-actions">
                    <button class="btn btn-secondary" onclick="clearCart()">æ¸…ç©ºè³¼ç‰©è»Š</button>
                    <button class="btn btn-primary" onclick="showCheckout()">çµå¸³</button>
                </div>
            `;

            content.innerHTML = html;
        }

        function clearCart() {
            cart = {};
            renderCart();
        }

        function showCheckout() {
            if (Object.keys(cart).length === 0) return;
            document.getElementById('menuSection').classList.add('hidden');
            document.getElementById('checkoutSection').classList.remove('hidden');
        }

        function placeOrder() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();

            if (!name || !phone) {
                alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½');
                return;
            }

            const orderId = `ORD-${Math.floor(Math.random() * 100000)}`;
            let total = 0;
            let itemsHtml = '';

            Object.keys(cart).forEach(key => {
                const [pid, size, sugar, ice] = key.split('_');
                const product = PRODUCTS.find(p => p.id === pid);
                if (!product) return;

                const qty = cart[key];
                const itemPrice = product.price + SIZE_OPTIONS[size];
                total += itemPrice * qty;

                itemsHtml += `<p>${product.emoji} ${product.title} (${size} | ${sugar} | ${ice}) Ã— ${qty} = ${formatCurrency(itemPrice * qty)}</p>`;
            });

            document.getElementById('orderIdDisplay').textContent = orderId;
            document.getElementById('orderName').textContent = name;
            document.getElementById('orderPhone').textContent = phone;
            document.getElementById('orderItems').innerHTML = itemsHtml;
            document.getElementById('orderTotal').textContent = formatCurrency(total);

            cart = {};
            renderCart();

            document.getElementById('checkoutSection').classList.add('hidden');
            document.getElementById('confirmationSection').classList.remove('hidden');
        }

        function returnToShop() {
            document.getElementById('confirmationSection').classList.add('hidden');
            document.getElementById('menuSection').classList.remove('hidden');
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
        }

        // Event listeners
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                currentCategory = e.target.dataset.category;
                renderProducts();
            });
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderProducts();
        });

        // Initialize
        renderProducts();
        renderCart();
    </script>
</body>
</html>
    }
});
