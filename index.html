<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßã Bubble tea shop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        h1 {
            color: #764ba2;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .filter-section {
            margin-bottom: 25px;
        }

        .filter-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .category-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .category-btn:hover {
            background: #f0f0ff;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
        }

        .search-box {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .product-grid {
            display: grid;
            gap: 20px;
        }

        .product-card {
            border: 2px solid #eee;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .product-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .product-header {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
        }

        .product-emoji {
            font-size: 3em;
        }

        .product-info {
            flex: 1;
        }

        .product-title {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 5px;
        }

        .product-category {
            display: inline-block;
            background: #f0f0ff;
            color: #667eea;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            margin-bottom: 8px;
        }

        .product-description {
            color: #666;
            margin-bottom: 10px;
        }

        .product-price {
            font-weight: 600;
            color: #764ba2;
            font-size: 1.1em;
        }

        .product-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .option-group label {
            display: block;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 5px;
            color: #555;
        }

        .option-group select {
            width: 100%;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .add-to-cart-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .cart-empty {
            text-align: center;
            color: #999;
            padding: 20px;
        }

        .cart-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-details {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 8px;
        }

        .cart-item-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .cart-item-qty {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .qty-btn {
            width: 28px;
            height: 28px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }

        .qty-btn:hover {
            background: #667eea;
            color: white;
        }

        .qty-display {
            min-width: 30px;
            text-align: center;
            font-weight: 600;
        }

        .cart-total {
            font-size: 1.3em;
            font-weight: 700;
            color: #764ba2;
            margin: 20px 0;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .cart-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .checkout-form {
            background: #f9f9ff;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .order-confirmation {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #4caf50;
        }

        .success-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 15px;
        }

        .order-details {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
        }

        @media (max-width: 640px) {
            .product-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <h1>üßã Ê≥°Ê≤´Ëå∂È£≤Â∫ó</h1>
            
            <div id="menuSection">
                <div class="filter-section">
                    <label>üîç ÂàÜÈ°ûÁØ©ÈÅ∏</label>
                    <div class="category-buttons">
                        <button class="category-btn active" data-category="all">ÂÖ®ÈÉ®</button>
                        <button class="category-btn" data-category="tea">Ëå∂È£≤</button>
                        <button class="category-btn" data-category="latte">ÊãøÈêµ</button>
                        <button class="category-btn" data-category="fruit">Ê∞¥Êûú</button>
                        <button class="category-btn" data-category="special">ÁâπË™ø</button>
                    </div>
                </div>

                <div class="filter-section">
                    <label>üîç ÊêúÂ∞ãÈ£≤ÂìÅ</label>
                    <input type="text" class="search-box" id="searchInput" placeholder="Ëº∏ÂÖ•È£≤ÂìÅÂêçÁ®±...">
                </div>

                <h2>‚òï ËèúÂñÆ</h2>
                <p id="productCount" style="color: #666; margin-bottom: 20px;"></p>
                <div class="product-grid" id="productGrid"></div>
            </div>

            <div id="checkoutSection" class="hidden">
                <h2>üìù ÁµêÂ∏≥Ë≥áË®ä</h2>
                <div class="checkout-form">
                    <div class="form-group">
                        <label>ÂßìÂêç *</label>
                        <input type="text" id="customerName" placeholder="Ë´ãËº∏ÂÖ•ÊÇ®ÁöÑÂßìÂêç">
                    </div>
                    <div class="form-group">
                        <label>ÈõªË©± *</label>
                        <input type="text" id="customerPhone" placeholder="Ë´ãËº∏ÂÖ•ÊÇ®ÁöÑÈõªË©±">
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="placeOrder()">Á¢∫Ë™ç‰∏ãÂñÆ</button>
                </div>
            </div>

            <div id="confirmationSection" class="hidden">
                <div class="order-confirmation">
                    <div class="success-icon">‚úÖ</div>
                    <h2 style="text-align: center; color: #4caf50;">Ë®ÇÂñÆÁ¢∫Ë™çÔºÅ</h2>
                    <p style="text-align: center; margin: 10px 0;">Ë®ÇÂñÆÁ∑®Ëôü: <strong id="orderIdDisplay"></strong></p>
                    
                    <div class="order-details">
                        <p><strong>ÂßìÂêç:</strong> <span id="orderName"></span></p>
                        <p><strong>ÈõªË©±:</strong> <span id="orderPhone"></span></p>
                        <hr style="margin: 15px 0;">
                        <h3>üßæ Ë®ÇÂñÆÊòéÁ¥∞</h3>
                        <div id="orderItems"></div>
                        <hr style="margin: 15px 0;">
                        <p style="font-size: 1.3em; font-weight: 700; color: #764ba2;">üí∞ Á∏ΩÈáëÈ°ç: <span id="orderTotal"></span></p>
                    </div>
                    
                    <p style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        ‚è∞ ÊÑüË¨ùÊÇ®ÁöÑË®ÇË≥ºÔºÅË´ãËá≥Ê´ÉÊ™ØÂèñÈ§ê„ÄÇ
                    </p>
                    
                    <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="returnToShop()">ËøîÂõûÂïÜÂ∫ó</button>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <h3>üõí Ë≥ºÁâ©Ëªä</h3>
            <div id="cartContent"></div>
        </div>
    </div>

    <script>
        const PRODUCTS = [
            {"id": "p1", "title": "ÁèçÁè†Â•∂Ëå∂", "description": "Á∂ìÂÖ∏ÁèçÁè†Â•∂Ëå∂ÔºåQÂΩàÁèçÁè†", "price": 60, "emoji": "üßã", "category": "tea"},
            {"id": "p2", "title": "È§äÊ®ÇÂ§öÁ∂†Ëå∂", "description": "Ê∏ÖÁàΩÁ∂†Ëå∂ÈÖçÈ§äÊ®ÇÂ§ö", "price": 55, "emoji": "üçµ", "category": "tea"},
            {"id": "p3", "title": "ÊäπËå∂ÊãøÈêµ", "description": "ÊøÉÈÉÅÊäπËå∂È¢®Âë≥", "price": 70, "emoji": "üçµ", "category": "latte"},
            {"id": "p4", "title": "ÁÉèÈæçÂ•∂Ëå∂", "description": "ÁÉèÈæçËå∂ËàáÈÆÆÂ•∂ÂÆåÁæéÁµêÂêà", "price": 65, "emoji": "ü•õ", "category": "tea"},
            {"id": "p5", "title": "ÂÜ¨ÁìúÊ™∏Ê™¨", "description": "ÂÇ≥Áµ±ÂÜ¨ÁìúÈÖçÊñ∞ÈÆÆÊ™∏Ê™¨", "price": 50, "emoji": "üçã", "category": "fruit"},
            {"id": "p6", "title": "ËäãÈ†≠Â•∂Ëå∂", "description": "È¶ôÊøÉËäãÈ†≠Â•∂Ëå∂", "price": 65, "emoji": "üü£", "category": "tea"},
            {"id": "p7", "title": "ÈªëÁ≥ñÁèçÁè†ÈÆÆÂ•∂", "description": "ÈªëÁ≥ñÁèçÁè†ËàáÈÆÆÂ•∂", "price": 75, "emoji": "üßã", "category": "special"},
            {"id": "p8", "title": "Ê≥∞ÂºèÂ•∂Ëå∂", "description": "ÊøÉÈÉÅÊ≥∞ÂºèÈ¢®Âë≥", "price": 60, "emoji": "üß°", "category": "tea"},
            {"id": "p9", "title": "ËäíÊûúÂÜ∞Ê≤ô", "description": "Êñ∞ÈÆÆËäíÊûúÂÜ∞Ê≤ô", "price": 80, "emoji": "ü•≠", "category": "fruit"},
            {"id": "p10", "title": "ËçâËéìÂ•∂Ëå∂", "description": "È¶ôÁîúËçâËéìÂ•∂Ëå∂", "price": 70, "emoji": "üçì", "category": "fruit"},
            {"id": "p11", "title": "ÁÑ¶Á≥ñÊãøÈêµ", "description": "È¶ôÁîúÁÑ¶Á≥ñÊãøÈêµ", "price": 75, "emoji": "‚òï", "category": "latte"},
            {"id": "p12", "title": "Ê™∏Ê™¨Á∂†Ëå∂", "description": "Ê∏ÖÁàΩÊ™∏Ê™¨Á∂†Ëå∂", "price": 50, "emoji": "üçã", "category": "tea"},
            {"id": "p13", "title": "ËúÇËúúÂ•∂Ëå∂", "description": "Â§©ÁÑ∂ËúÇËúúÂ•∂Ëå∂", "price": 65, "emoji": "üçØ", "category": "tea"},
            {"id": "p14", "title": "ÁôæÈ¶ôÊûúËå∂", "description": "ÁÜ±Â∏∂ÁôæÈ¶ôÊûúÁ∂†Ëå∂", "price": 60, "emoji": "üü†", "category": "fruit"},
            {"id": "p15", "title": "Ê§∞Â≠êÂÜ∞Ê≤ô", "description": "È¶ôÊøÉÊ§∞Â≠êÂÜ∞Ê≤ô", "price": 75, "emoji": "ü••", "category": "fruit"},
            {"id": "p16", "title": "Á¥ÖËå∂ÊãøÈêµ", "description": "Á∂ìÂÖ∏Á¥ÖËå∂ÊãøÈêµ", "price": 65, "emoji": "‚òï", "category": "latte"},
            {"id": "p17", "title": "Ê∞¥ËúúÊ°ÉÁÉèÈæç", "description": "È¶ôÁîúÊ∞¥ËúúÊ°ÉÁÉèÈæçËå∂", "price": 60, "emoji": "üçë", "category": "tea"},
            {"id": "p18", "title": "Ê¶õÊûúÊãøÈêµ", "description": "ÊøÉÈÉÅÊ¶õÊûúÊãøÈêµ", "price": 80, "emoji": "üå∞", "category": "latte"},
            {"id": "p19", "title": "Áé´Áë∞Â•∂Ëå∂", "description": "Ê∏ÖÈ¶ôÁé´Áë∞Â•∂Ëå∂", "price": 70, "emoji": "üåπ", "category": "tea"},
            {"id": "p20", "title": "Ë•øÁìúÊ±Å", "description": "Êñ∞ÈÆÆË•øÁìúÊ±Å", "price": 55, "emoji": "üçâ", "category": "fruit"},
            {"id": "p21", "title": "Â∑ßÂÖãÂäõÂ•∂Ëå∂", "description": "ÊøÉÈÉÅÂ∑ßÂÖãÂäõÂ•∂Ëå∂", "price": 70, "emoji": "üç´", "category": "tea"},
            {"id": "p22", "title": "È¶ôËçâÊãøÈêµ", "description": "È¶ôÁîúÈ¶ôËçâÊãøÈêµ", "price": 75, "emoji": "‚òï", "category": "latte"},
            {"id": "p23", "title": "ËçîÊûùËå∂", "description": "È¶ôÁîúËçîÊûùÁ∂†Ëå∂", "price": 60, "emoji": "üçá", "category": "tea"},
            {"id": "p24", "title": "È≥≥Ê¢®ÂÜ∞Ê≤ô", "description": "ÁÜ±Â∏∂È≥≥Ê¢®ÂÜ∞Ê≤ô", "price": 75, "emoji": "üçç", "category": "fruit"},
            {"id": "p25", "title": "‰ºØÁàµÂ•∂Ëå∂", "description": "È¶ôÊøÉ‰ºØÁàµÂ•∂Ëå∂", "price": 65, "emoji": "‚òï", "category": "tea"},
            {"id": "p26", "title": "Â•áÁï∞ÊûúËå∂", "description": "ÈÖ∏ÁîúÂ•áÁï∞ÊûúÁ∂†Ëå∂", "price": 60, "emoji": "ü•ù", "category": "fruit"},
            {"id": "p27", "title": "Êë©Âç°ÊãøÈêµ", "description": "ÂíñÂï°Â∑ßÂÖãÂäõÊãøÈêµ", "price": 80, "emoji": "‚òï", "category": "latte"},
            {"id": "p28", "title": "Êùè‰ªÅÂ•∂Ëå∂", "description": "È¶ôÊøÉÊùè‰ªÅÂ•∂Ëå∂", "price": 70, "emoji": "ü•ú", "category": "tea"},
            {"id": "p29", "title": "ËóçËéìÂÜ∞Ê≤ô", "description": "ÂÅ•Â∫∑ËóçËéìÂÜ∞Ê≤ô", "price": 80, "emoji": "ü´ê", "category": "fruit"},
            {"id": "p30", "title": "ËåâËéâÁ∂†Ëå∂", "description": "Ê∏ÖÈ¶ôËåâËéâÁ∂†Ëå∂", "price": 50, "emoji": "üå∏", "category": "tea"}
        ];

        const SIZE_OPTIONS = {"‰∏≠ÊùØ": 0, "Â§ßÊùØ": 10};
        const SUGAR_OPTIONS = ["Ê≠£Â∏∏Á≥ñ", "Â∞ëÁ≥ñ", "ÂçäÁ≥ñ", "ÂæÆÁ≥ñ", "ÁÑ°Á≥ñ"];
        const ICE_OPTIONS = ["Ê≠£Â∏∏ÂÜ∞", "Â∞ëÂÜ∞", "ÂéªÂÜ∞", "ÁÜ±È£≤"];

        let cart = {};
        let currentCategory = 'all';
        let searchQuery = '';

        function formatCurrency(amount) {
            return `NT$ ${amount}`;
        }

        function renderProducts() {
            const grid = document.getElementById('productGrid');
            const filtered = PRODUCTS.filter(p => {
                const matchCategory = currentCategory === 'all' || p.category === currentCategory;
                const matchSearch = p.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                                   p.description.toLowerCase().includes(searchQuery.toLowerCase());
                return matchCategory && matchSearch;
            });

            document.getElementById('productCount').textContent = 
                currentCategory === 'all' 
                    ? `È°ØÁ§∫ÂÖ®ÈÉ® ${filtered.length} Á®ÆÈ£≤ÂìÅ` 
                    : `È°ØÁ§∫ ${filtered.length} Á®ÆÈ£≤ÂìÅ`;

            if (filtered.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Êâæ‰∏çÂà∞Á¨¶ÂêàÁöÑÈ£≤ÂìÅÔºåË´ãË©¶Ë©¶ÂÖ∂‰ªñÊêúÂ∞ãÊ¢ù‰ª∂ÔºÅ</p>';
                return;
            }

            grid.innerHTML = filtered.map(p => {
                const iceOptions = (p.category === 'tea' || p.category === 'latte') 
                    ? ICE_OPTIONS 
                    : ICE_OPTIONS.filter(opt => opt !== 'ÁÜ±È£≤');

                return `
                    <div class="product-card">
                        <div class="product-header">
                            <div class="product-emoji">${p.emoji}</div>
                            <div class="product-info">
                                <div class="product-title">${p.title}</div>
                                <span class="product-category">üè∑Ô∏è ${getCategoryName(p.category)}</span>
                                <div class="product-description">${p.description}</div>
                                <div class="product-price">üí∞ ${formatCurrency(p.price)} Ëµ∑</div>
                            </div>
                        </div>
                        <div class="product-options">
                            <div class="option-group">
                                <label>ÂÆπÈáè</label>
                                <select id="size_${p.id}">
                                    ${Object.keys(SIZE_OPTIONS).map(s => 
                                        `<option value="${s}">${s}${SIZE_OPTIONS[s] > 0 ? ' +' + SIZE_OPTIONS[s] : ''}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            <div class="option-group">
                                <label>ÁîúÂ∫¶</label>
                                <select id="sugar_${p.id}">
                                    ${SUGAR_OPTIONS.map(s => `<option value="${s}">${s}</option>`).join('')}
                                </select>
                            </div>
                            <div class="option-group">
                                <label>ÂÜ∞Â∫¶</label>
                                <select id="ice_${p.id}">
                                    ${iceOptions.map(i => `<option value="${i}">${i}</option>`).join('')}
                                </select>
                            </div>
                        </div>
                        <button class="add-to-cart-btn" onclick="addToCart('${p.id}')">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                    </div>
                `;
            }).join('');
        }

        function getCategoryName(cat) {
            const names = {tea: 'Ëå∂È£≤', latte: 'ÊãøÈêµ', fruit: 'Ê∞¥Êûú', special: 'ÁâπË™ø'};
            return names[cat] || cat;
        }

        function addToCart(pid) {
            const size = document.getElementById(`size_${pid}`).value;
            const sugar = document.getElementById(`sugar_${pid}`).value;
            const ice = document.getElementById(`ice_${pid}`).value;
            const key = `${pid}_${size}_${sugar}_${ice}`;
            
            cart[key] = (cart[key] || 0) + 1;
            renderCart();
        }

        function updateQty(key, delta) {
            cart[key] = (cart[key] || 0) + delta;
            if (cart[key] <= 0) delete cart[key];
            renderCart();
        }

        function renderCart() {
            const content = document.getElementById('cartContent');
            const keys = Object.keys(cart);

            if (keys.length === 0) {
                content.innerHTML = '<div class="cart-empty">Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑ</div>';
                return;
            }

            let total = 0;
            let html = '';

            keys.forEach(key => {
                const [pid, size, sugar, ice] = key.split('_');
                const product = PRODUCTS.find(p => p.id === pid);
                if (!product) return;

                const qty = cart[key];
                const itemPrice = product.price + SIZE_OPTIONS[size];
                const subtotal = itemPrice * qty;
                total += subtotal;

                html += `
                    <div class="cart-item">
                        <div class="cart-item-title">${product.emoji} ${product.title}</div>
                        <div class="cart-item-details">${size} | ${sugar} | ${ice}</div>
                        <div class="cart-item-price">
                            <span>${formatCurrency(itemPrice)} √ó ${qty}</span>
                            <span>${formatCurrency(subtotal)}</span>
                        </div>
                        <div class="cart-item-qty">
                            <button class="qty-btn" onclick="updateQty('${key}', -1)">‚àí</button>
                            <span class="qty-display">${qty}</span>
                            <button class="qty-btn" onclick="updateQty('${key}', 1)">+</button>
                        </div>
                    </div>
                `;
            });

            html += `
                <div class="cart-total">Á∏ΩË®à: ${formatCurrency(total)}</div>
                <div class="cart-actions">
                    <button class="btn btn-secondary" onclick="clearCart()">Ê∏ÖÁ©∫Ë≥ºÁâ©Ëªä</button>
                    <button class="btn btn-primary" onclick="showCheckout()">ÁµêÂ∏≥</button>
                </div>
            `;

            content.innerHTML = html;
        }

        function clearCart() {
            cart = {};
            renderCart();
        }

        function showCheckout() {
            if (Object.keys(cart).length === 0) return;
            document.getElementById('menuSection').classList.add('hidden');
            document.getElementById('checkoutSection').classList.remove('hidden');
        }

        function placeOrder() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();

            if (!name || !phone) {
                alert('Ë´ãÂ°´ÂØ´ÊâÄÊúâÂøÖÂ°´Ê¨Ñ‰Ωç');
                return;
            }

            const orderId = `ORD-${Math.floor(Math.random() * 100000)}`;
            let total = 0;
            let itemsHtml = '';

            Object.keys(cart).forEach(key => {
                const [pid, size, sugar, ice] = key.split('_');
                const product = PRODUCTS.find(p => p.id === pid);
                if (!product) return;

                const qty = cart[key];
                const itemPrice = product.price + SIZE_OPTIONS[size];
                total += itemPrice * qty;

                itemsHtml += `<p>${product.emoji} ${product.title} (${size} | ${sugar} | ${ice}) √ó ${qty} = ${formatCurrency(itemPrice * qty)}</p>`;
            });

            document.getElementById('orderIdDisplay').textContent = orderId;
            document.getElementById('orderName').textContent = name;
            document.getElementById('orderPhone').textContent = phone;
            document.getElementById('orderItems').innerHTML = itemsHtml;
            document.getElementById('orderTotal').textContent = formatCurrency(total);

            cart = {};
            renderCart();

            document.getElementById('checkoutSection').classList.add('hidden');
            document.getElementById('confirmationSection').classList.remove('hidden');
        }

        function returnToShop() {
            document.getElementById('confirmationSection').classList.add('hidden');
            document.getElementById('menuSection').classList.remove('hidden');
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
        }

        // Event listeners
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                currentCategory = e.target.dataset.category;
                renderProducts();
            });
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            renderProducts();
        });

        // Initialize
        renderProducts();
        renderCart();
    </script>
</body>
</html>
